(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52ca03ef"],{"53ab":function(e,t,r){"use strict";var a=r("e716");t["a"]={saveSysOrg:function(e){return a["a"].post("/usrm/orgMgr/saveSysOrg",e)},getSysOrg:function(){return a["a"].get("/usrm/orgMgr/getSysOrg")},delSysOrg:function(e){return a["a"].delete("/usrm/orgMgr/delSysOrg/"+e)},getOrgTree:function(){return a["a"].get("/usrm/orgMgr/getOrgTree")}}},8070:function(e,t,r){"use strict";var a=r("e716");t["a"]={saveSysRole:function(e){return a["a"].post("/usrm/roleMgr/saveSysRole",e)},querySysRole:function(e){return a["a"].get("/usrm/roleMgr/querySysRole",{params:e})},delSysRole:function(e){return a["a"].delete("/usrm/roleMgr/delSysRole/"+e)},getSelectPerm:function(e){return a["a"].get("/usrm/roleMgr/getSelectPerm",{params:e})},getRoleByOrgUuid:function(e){return a["a"].get("/usrm/roleMgr/getRoleByOrgUuid",{params:e})}}},c196:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=this,r=t.$createElement,a=t._self._c||r;return a("flex-container",{attrs:{wrap:"nowrap",justifyContent:"space-between"}},[a("flex-item",{attrs:{grow:1,width:"100%"}},[a("el-card",[a("flex-container",{attrs:{slot:"header",justifyContent:"space-between"},slot:"header"},[a("flex-item",{attrs:{alignItems:"center"}},[a("i",{staticClass:"el-icon-s-custom margin-right-6 font-size-16"}),t._v("用户信息\n        ")]),a("flex-item",{attrs:{alignItems:"center"}},[a("el-button",{attrs:{type:"primary",size:"mini",circle:"",icon:"el-icon-plus",title:"添加"},on:{click:t.handleAddUser}}),a("el-button",{attrs:{type:"primary",size:"mini",circle:"",icon:"el-icon-search",title:"查询"},on:{click:t.handleQueryUser}}),a("el-button",{attrs:{size:"mini",circle:"",plain:"",icon:"el-icon-refresh-left",title:"重置"},on:{click:function(e){t.$refs["userForm"].resetFields(),t.lastLogDate=[]}}}),a("el-button",{attrs:{disabled:!t.tableSelection.length>0,size:"mini",circle:"",plain:"",icon:"icon-fa fa-lock",title:"批量锁定"},on:{click:function(e){return t.handleUserLock(!0)}}}),a("el-button",{attrs:{disabled:!t.tableSelection.length>0,size:"mini",circle:"",plain:"",icon:"icon-fa fa-unlock",title:"批量解锁"},on:{click:function(e){return t.handleUserUnlock(!0)}}}),a("el-button",{attrs:{disabled:!t.tableSelection.length>0,size:"mini",circle:"",plain:"",icon:"el-icon-switch-button",title:"批量注销"},on:{click:function(e){return t.handleUserDest(!0)}}})],1)],1),a("flex-container",{attrs:{direction:"column",wrap:"nowrap"}},[a("flex-item",{staticClass:"margin-bottom-10"},[a("el-form",{ref:"userForm",staticClass:"form-style-line",attrs:{model:t.userForm,"label-position":"right","label-width":"80px"}},[a("el-row",[a("col-pr",{attrs:{xs:24,sm:24,md:12,lg:6,xl:6}},[a("el-form-item",{attrs:{label:"账户名称 :",prop:"acName"}},[a("el-input",{attrs:{maxlength:"10","show-word-limit":""},model:{value:t.userForm.acName,callback:function(e){t.$set(t.userForm,"acName",e)},expression:"userForm.acName"}})],1)],1),a("col-pr",{attrs:{xs:24,sm:24,md:12,lg:6,xl:6}},[a("el-form-item",{attrs:{label:"用户姓名 :",prop:"userName"}},[a("el-input",{attrs:{maxlength:"10","show-word-limit":""},model:{value:t.userForm.userName,callback:function(e){t.$set(t.userForm,"userName",e)},expression:"userForm.userName"}})],1)],1),a("col-pr",{attrs:{xs:24,sm:24,md:12,lg:6,xl:6}},[a("el-form-item",{attrs:{label:"用户状态 :",prop:"acStat"}},[a("dict-select",{attrs:{"dict-key":"AcStat",placeholder:"请选择",clearable:""},model:{value:t.userForm.acStat,callback:function(e){t.$set(t.userForm,"acStat",e)},expression:"userForm.acStat"}})],1)],1),a("col-pr",{attrs:{xs:24,sm:24,md:12,lg:6,xl:6}},[a("el-form-item",{attrs:{label:"隶属组织 :",prop:"orgUuid"}},[a("el-cascader",{attrs:{options:t.orgTree,props:t.orgTreeProps,clearable:""},model:{value:t.userForm.orgUuid,callback:function(e){t.$set(t.userForm,"orgUuid",e)},expression:"userForm.orgUuid"}})],1)],1),a("col-pr",{attrs:{xs:24,sm:24,md:12,lg:6,xl:6}},[a("el-form-item",{attrs:{label:"用户性别 :",prop:"userSex"}},[a("dict-select",{attrs:{"dict-key":"Sex",placeholder:"请选择",clearable:""},model:{value:t.userForm.userSex,callback:function(e){t.$set(t.userForm,"userSex",e)},expression:"userForm.userSex"}})],1)],1),a("col-pr",{attrs:{xs:24,sm:24,md:12,lg:12,xl:6}},[a("el-form-item",{attrs:{label:"最后登录 :",prop:"lastLogDate"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.lastLogDate,callback:function(e){t.lastLogDate=e},expression:"lastLogDate"}})],1)],1)],1)],1)],1),a("flex-item",[a("data-table",{ref:"userTable",attrs:{border:"",index:"","auto-load":"","highlight-current-row":"","auto-update":"","column-button":"","csv-button":"",title:"Data Table","load-data-func":t.loadUser,pageOptions:t.pageOptions},on:{"selection-change":function(t){return e.tableSelection=t}}},[a("data-table-column",{attrs:{prop:"selection",type:"selection",align:"center",width:"50",fixed:"left"}}),a("data-table-column",{attrs:{prop:"acName",label:"账户名称","show-overflow-tooltip":""}}),a("data-table-column",{attrs:{prop:"acStat",label:"状态","show-overflow-tooltip":"",formatter:function(e){return t.$utils.tableColDictFormt("AcStat",e.acStat)}}}),a("data-table-column",{attrs:{prop:"orgUuid",label:"隶属组织","show-overflow-tooltip":"",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-cascader",{staticClass:"cascader-table-disabled",attrs:{options:t.orgTree,value:e.row.orgUuid,props:t.orgViewProps,disabled:""}})]}}])}),a("data-table-column",{attrs:{prop:"userName",label:"用户姓名","show-overflow-tooltip":""}}),a("data-table-column",{attrs:{prop:"userSex",label:"性别","show-overflow-tooltip":"",formatter:function(e){return t.$utils.tableColDictFormt("Sex",e.userSex)}}}),a("data-table-column",{attrs:{prop:"userPhone",label:"联系电话","show-overflow-tooltip":""}}),a("data-table-column",{attrs:{prop:"userEmail",label:"邮件","show-overflow-tooltip":""}}),a("data-table-column",{attrs:{prop:"userBirthday",label:"出生日期","show-overflow-tooltip":"",formatter:t.$utils.tableColTimeFormt}}),a("data-table-column",{attrs:{prop:"lastLogDate",label:"最后登录","show-overflow-tooltip":"",formatter:t.$utils.tableColTimeFormt}}),a("data-table-column",{attrs:{prop:"op",label:"操作",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{disabled:"3"===e.row.acStat,type:"text",size:"mini",icon:"el-icon-edit",title:"编辑"},on:{click:function(r){return t.handleEditUser(e.row)}}}),a("el-button",{attrs:{disabled:"3"===e.row.acStat,type:"text",size:"mini",icon:"el-icon-delete",title:"删除"},on:{click:function(r){return t.handleDelUser(e.row)}}}),a("el-button",{attrs:{disabled:"2"===e.row.acStat||"3"===e.row.acStat,type:"text",size:"mini",icon:"icon-fa fa-lock",title:"锁定"},on:{click:function(r){return t.handleUserLock(!1,e.row)}}}),a("el-button",{attrs:{disabled:"1"===e.row.acStat||"3"===e.row.acStat,type:"text",size:"mini",icon:"icon-fa fa-unlock",title:"解锁"},on:{click:function(r){return t.handleUserUnlock(!1,e.row)}}}),a("el-button",{attrs:{disabled:"3"===e.row.acStat,type:"text",size:"mini",icon:"el-icon-switch-button",title:"注销"},on:{click:function(r){return t.handleUserDest(!1,e.row)}}})]}}])})],1)],1)],1)],1)],1),a("dialog-drag",{attrs:{title:"用户信息编辑",visible:t.showUserDia},on:{"update:visible":function(e){t.showUserDia=e}}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-edit margin-right-4"}),t._v("用户信息编辑\n    ")]),a("user-mgr-edit",{attrs:{initData:t.editUser},on:{updataData:t.doUpdataUser,close:function(e){t.showUserDia=!1}}})],1)],1)},o=[],s=(r("ac6a"),r("f3e2"),r("96cf"),r("3b8d")),l=r("e716"),n={querySysUser:function(e){return l["a"].get("/usrm/userMgr/querySysUser",{params:e})},delSysUser:function(e){return l["a"].delete("/usrm/userMgr/delSysUser/"+e)},saveSysUser:function(e){return l["a"].post("/usrm/userMgr/saveSysUser",e)},userLock:function(e){return l["a"].put("/usrm/userMgr/userLock/"+e)},userUnlock:function(e){return l["a"].put("/usrm/userMgr/userUnlock/"+e)},userDest:function(e){return l["a"].put("/usrm/userMgr/userDest/"+e)}},i=r("53ab"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("flex-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("el-form",{ref:"editForm",staticClass:"form-style-line",attrs:{model:e.formData,rules:e.formRules,"label-position":"right","label-width":"90px"}},[r("el-row",{attrs:{span:12}},[r("el-col",[r("el-form-item",{attrs:{label:"账户名称 :",prop:"acName"}},[r("el-input",{attrs:{maxlength:"10","show-word-limit":""},model:{value:e.formData.acName,callback:function(t){e.$set(e.formData,"acName",t)},expression:"formData.acName"}})],1)],1),r("el-col",[r("el-form-item",{attrs:{label:"账户状态 :",prop:"acStat"}},[r("dict-select",{attrs:{"dict-key":"AcStat",placeholder:"请选择",clearable:""},model:{value:e.formData.acStat,callback:function(t){e.$set(e.formData,"acStat",t)},expression:"formData.acStat"}})],1)],1),r("el-col",[r("el-form-item",{attrs:{label:"隶属组织 :",prop:"orgUuid"}},[r("el-cascader",{attrs:{options:e.orgTree,props:e.orgTreeProps,clearable:""},on:{change:e.orgUuidChange},model:{value:e.formData.orgUuid,callback:function(t){e.$set(e.formData,"orgUuid",t)},expression:"formData.orgUuid"}})],1)],1),r("el-col",[r("el-form-item",{attrs:{label:"拥有角色 :",prop:"roleUuids"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.formData.roleUuids,callback:function(t){e.$set(e.formData,"roleUuids",t)},expression:"formData.roleUuids"}},e._l(e.roles,function(e){return r("el-option",{key:e.uuid,attrs:{label:e.roleName,value:e.uuid}})}),1)],1)],1),r("el-col",[r("el-form-item",{attrs:{label:"初始密码 :",prop:"acPwd"}},[r("el-input",{attrs:{maxlength:"10","show-word-limit":""},model:{value:e.formData.acPwd,callback:function(t){e.$set(e.formData,"acPwd",t)},expression:"formData.acPwd"}})],1)],1),r("el-col",[r("el-form-item",{attrs:{label:"用户姓名 :",prop:"userName"}},[r("el-input",{attrs:{maxlength:"10","show-word-limit":""},model:{value:e.formData.userName,callback:function(t){e.$set(e.formData,"userName",t)},expression:"formData.userName"}})],1)],1),r("el-col",[r("el-form-item",{attrs:{label:"用户性别 :",prop:"userSex"}},[r("dict-select",{attrs:{"dict-key":"Sex",placeholder:"请选择",clearable:""},model:{value:e.formData.userSex,callback:function(t){e.$set(e.formData,"userSex",t)},expression:"formData.userSex"}})],1)],1),r("el-col",[r("el-form-item",{attrs:{label:"联系电话 :",prop:"userPhone"}},[r("el-input",{attrs:{maxlength:"10","show-word-limit":""},model:{value:e.formData.userPhone,callback:function(t){e.$set(e.formData,"userPhone",t)},expression:"formData.userPhone"}})],1)],1),r("el-col",[r("el-form-item",{attrs:{label:"出生日期 :",prop:"userBirthday"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.formData.userBirthday,callback:function(t){e.$set(e.formData,"userBirthday",t)},expression:"formData.userBirthday"}})],1)],1),r("el-col",[r("el-form-item",{attrs:{label:"邮箱地址 :",prop:"userEmail"}},[r("el-input",{attrs:{maxlength:"50","show-word-limit":""},model:{value:e.formData.userEmail,callback:function(t){e.$set(e.formData,"userEmail",t)},expression:"formData.userEmail"}})],1)],1),e.formData.createdUser?[r("el-col",[r("el-form-item",{attrs:{label:"创建用户 :",prop:"createdUser"}},[r("el-input",{attrs:{disabled:""},model:{value:e.formData.createdUser,callback:function(t){e.$set(e.formData,"createdUser",t)},expression:"formData.createdUser"}})],1)],1),r("el-col",[r("el-form-item",{attrs:{label:"创建时间 :",prop:"createdTime"}},[r("el-input",{attrs:{value:e.$utils.toDateString(e.formData.createdTime,"yyyy-MM-dd HH:mm:ss"),disabled:""}})],1)],1),r("el-col",[r("el-form-item",{attrs:{label:"更新用户 :",prop:"updatedUser"}},[r("el-input",{attrs:{disabled:""},model:{value:e.formData.updatedUser,callback:function(t){e.$set(e.formData,"updatedUser",t)},expression:"formData.updatedUser"}})],1)],1),r("el-col",[r("el-form-item",{attrs:{label:"更新时间 :",prop:"updatedTime"}},[r("el-input",{attrs:{value:e.$utils.toDateString(e.formData.updatedTime,"yyyy-MM-dd HH:mm:ss"),disabled:""}})],1)],1)]:e._e()],2)],1),r("flex-container",{staticClass:"footer",attrs:{justifyContent:"flex-end"}},[r("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleUpdateData}},[e._v("确 定")])],1)],1)},u=[],m=r("8070"),d={props:{initData:{type:Object}},inject:["orgTree","orgTreeProps"],data:function(){return{loading:!1,roles:[],formData:Object.assign({},this.initData),formRules:{acName:[{required:!0,message:"请输入账户名称 !",trigger:"change"}],acStat:[{required:!0,message:"请选择账户状态 !",trigger:"change"}],orgUuid:[{required:!0,message:"请选择隶属组织 !",trigger:"change"}],roleUuids:[{required:!0,message:"请选择拥有角色 !",trigger:"change"}]}}},mounted:function(){this.formData.orgUuid&&this.loadRole(this.formData.orgUuid)},methods:{loadRole:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,m["a"].getRoleByOrgUuid({orgUuid:t});case 4:r=e.sent,this.roles=r.data,e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:return e.prev=10,this.loading=!1,e.finish(10);case 13:case"end":return e.stop()}},e,this,[[0,8,10,13]])}));function t(t){return e.apply(this,arguments)}return t}(),orgUuidChange:function(e){this.loadRole(e),this.formData.roleUuids=[]},handleUpdateData:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$refs["editForm"].validate();case 3:this.$emit("updataData",this.formData),this.$emit("close"),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}()}},p=d,f=r("2877"),h=Object(f["a"])(p,c,u,!1,null,null,null),g=h.exports,b={uuid:null,acName:"",acPwd:"",orgUuid:"",encSalt:"",acStat:"",lastLogDate:"",userName:"",userSex:"",userPhone:"",userEmail:"",userBirthday:"",createdUser:"",createdTime:"",updatedUser:"",updatedTime:"",roleUuids:[]},w={components:{UserMgrEdit:g},provide:function(){return{orgTree:this.orgTree,orgTreeProps:this.orgTreeProps}},data:function(){return{tableSelection:[],orgTree:[],orgTreeProps:{checkStrictly:!0,emitPath:!1,value:"uuid",label:"orgName"},orgViewProps:{checkStrictly:!0,emitPath:!1,value:"uuid",label:"orgName"},showUserDia:!1,userForm:{userName:"",userStat:"",userSex:"",orgUuid:""},lastLogDate:[],pageOptions:{pagerCount:5},editUser:{}}},mounted:function(){this.initOrgTree()},methods:{initOrgTree:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i["a"].getOrgTree();case 3:t=e.sent,this.$utils.eachTree(t.data,function(e){0===e.children.length&&delete e.children}),this.$utils.clear(this.orgTree),t.data.forEach(function(e){return r.orgTree.push(e)}),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](0);case 11:case"end":return e.stop()}},e,this,[[0,9]])}));function t(){return e.apply(this,arguments)}return t}(),loadUser:function(e){return n.querySysUser(e)},handleQueryUser:function(){var e=Object.assign({},this.userForm);this.lastLogDate&&2===this.lastLogDate.length&&Object.assign(e,{lastLogDateStart:this.lastLogDate[0].getTime(),lastLogDateEnd:this.lastLogDate[1].getTime()}),this.$refs["userTable"].loadData(e)},handleEditUser:function(e){this.editUser=Object.assign({},e),this.showUserDia=!0},handleAddUser:function(){this.editUser=Object.assign({},b),this.showUserDia=!0},handleDelUser:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.delSysUser([t.uuid]);case 3:e.sent;case 4:return e.prev=4,this.handleQueryUser(),e.finish(4);case 7:case"end":return e.stop()}},e,this,[[0,,4,7]])}));function t(t){return e.apply(this,arguments)}return t}(),handleUserLock:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=[],t?this.tableSelection.forEach(function(e){a.push(e.uuid)}):a.push(r.uuid),e.next=5,n.userLock(a);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:return e.prev=9,this.handleQueryUser(),e.finish(9);case 12:case"end":return e.stop()}},e,this,[[0,7,9,12]])}));function t(t,r){return e.apply(this,arguments)}return t}(),handleUserUnlock:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=[],t?this.tableSelection.forEach(function(e){a.push(e.uuid)}):a.push(r.uuid),e.next=5,n.userUnlock(a);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:return e.prev=9,this.handleQueryUser(),e.finish(9);case 12:case"end":return e.stop()}},e,this,[[0,7,9,12]])}));function t(t,r){return e.apply(this,arguments)}return t}(),handleUserDest:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$confirm("此操作会将用户置于最终状态且不可逆, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 3:return a=[],t?this.tableSelection.forEach(function(e){a.push(e.uuid)}):a.push(r.uuid),e.next=7,n.userDest(a);case 7:e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](0);case 11:return e.prev=11,this.handleQueryUser(),e.finish(11);case 14:case"end":return e.stop()}},e,this,[[0,9,11,14]])}));function t(t,r){return e.apply(this,arguments)}return t}(),doUpdataUser:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.saveSysUser(t);case 3:return e.prev=3,this.handleQueryUser(),e.finish(3);case 6:case"end":return e.stop()}},e,this,[[0,,3,6]])}));function t(t){return e.apply(this,arguments)}return t}()}},x=w,v=Object(f["a"])(x,a,o,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-52ca03ef.52bc3412.js.map